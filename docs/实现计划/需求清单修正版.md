# HR AI SaaS 需求清单（修正版）

> 基于 `HR_AI_SaaS需求清单.xlsx` 与实施计划文档对照分析后的修正版本
>
> **修正日期**: 2026-02-02
>
> **修正依据**: 不符合需求清单.md 分析报告 + 实施计划文档 Phase1-Phase5

---

## 一、核心统计指标（修正后）

| 指标 | 原始需求 | 实施计划 | 修正结果 |
|------|----------|----------|----------|
| **页面级需求(RQ)** | 72 | 77（+5） | **72** |
| **页面字段表(PageID)** | 58 | 0（未对齐） | **58** |
| **按钮字典(BTN)** | 285 | 0（未对齐） | **285** |
| **异常场景(EX)** | 25 | 0（未对齐） | **25** |
| **状态机对象** | 10 | 8（-2） | **10** |
| **AI场景** | 12 | 12 | 12 |

---

## 二、RQ编号与模块归属修正

### 2.1 问题描述

原实施计划文档（Phase5-AI能力中心.md）将 RQ0062-0070 归为 AI 页面，RQ0071-0072 归为报表页面，与需求清单的模块归属不一致。

### 2.2 修正方案

| RQ编号 | 原始归属(错误) | 修正归属(正确) | 模块 |
|--------|---------------|----------------|------|
| RQ0062 | AI页面 | **M09** | 报表与分析 |
| RQ0063 | AI页面 | **M09** | 报表与分析 |
| RQ0064 | AI页面 | **M09** | 报表与分析 |
| RQ0065 | AI页面 | **M09** | 报表与分析 |
| RQ0066 | 报表页面 | **M10** | AI能力中心 |
| RQ0067 | 报表页面 | **M10** | AI能力中心 |
| RQ0068 | 报表页面 | **M10** | AI能力中心 |
| RQ0069 | 报表页面 | **M10** | AI能力中心 |
| RQ0070 | 报表页面 | **M10** | AI能力中心 |
| RQ0071 | 报表页面 | **M10** | AI能力中心 |
| RQ0072 | 报表页面 | **M10** | AI能力中心 |

### 2.3 修正后的 M09 模块页面（RQ0062-0065）

| RQ编号 | PageID | 页面名称 | 页面描述 |
|--------|--------|----------|----------|
| RQ0062 | PG0062 | 考勤汇总报表 | 筛选区(组织/日期/状态)；图表(可选)；明细表 |
| RQ0063 | PG0063 | 薪资汇总报表(可选) | 筛选区(组织/日期/状态)；图表(可选)；明细表 |
| RQ0064 | PG0064 | 分析看板 | 指标卡片；趋势图；结构分布；下钻入口 |
| RQ0065 | PG0065 | 自定义报表(可选增强) | 维度选择；指标选择；筛选条件；预览 |

### 2.4 修正后的 M10 模块页面（RQ0066-0072）

| RQ编号 | PageID | 页面名称 | 页面描述 |
|--------|--------|----------|----------|
| RQ0066 | PG0066 | AI对话助手 | 左侧会话列表；右侧对话区；引用数据卡片；推荐问题 |
| RQ0067 | PG0067 | 团队概览总结 | 选择组织/时间；自动生成摘要；关键指标列表；引用数据 |
| RQ0068 | PG0068 | 稳定性/组织健康度分析 | 风险提示区；原因解释；对比图；建议动作区 |
| RQ0069 | PG0069 | AI建议与行动 | 建议列表；筛选(组织/类型/状态)；影响摘要 |
| RQ0070 | PG0070 | AI输出留痕与可解释性 | 查询(用户/时间/场景)；输出内容；引用数据快照；用户反馈 |
| RQ0071 | PG0071 | 离职风险(解释型)+What-if | 风险分布；高风险名单；原因维度；趋势变化 |
| RQ0072 | PG0072 | What-if模拟 | 选择场景(不招聘/加编/调岗)；输入参数；输出影响对比 |

---

## 三、状态机补全

### 3.1 问题描述

需求清单包含 10 个状态机对象，实施计划文档只覆盖了 8 个，缺少：
- `OnboardingTask`（入职任务）
- `OvertimeRequest`（加班申请）

### 3.2 修正方案

| 序号 | 状态机对象 | 英文名 | 模块 | 修正状态 |
|------|------------|--------|------|----------|
| 1 | 建议动作 | AIAction | M10 | ✅ 已覆盖 |
| 2 | 候选人 | Candidate | M03 | ✅ 已覆盖 |
| 3 | 任职事件 | EmploymentEvent | M02 | ✅ 已覆盖 |
| 4 | 招聘需求 | JobRequisition | M03 | ✅ 已覆盖 |
| 5 | 请假 | LeaveRequest | M05 | ✅ 已覆盖 |
| 6 | **入职任务** | **OnboardingTask** | **M04** | **❌ 未覆盖** |
| 7 | 加班 | OvertimeRequest | M05 | ⚠️ 部分覆盖（实现计划有类，状态机文档缺失） |
| 8 | 算薪批次 | PayrollRun | M06 | ✅ 已覆盖 |
| 9 | 绩效周期 | PerformanceCycle | M07 | ✅ 已覆盖 |
| 10 | HR工单 | Ticket | M08 | ✅ 已覆盖 |

### 3.3 缺失状态机补充设计

#### 3.3.1 入职任务状态机 (OnboardingTaskStateMachine)

```
状态流转：
    ┌───────────────┐
    │    pending    │ ←────────────────┐
    │  (待入职)     │                  │
    └───────┬───────┘                  │
           │ START_MATERIALS           │
           ▼                           │
    ┌───────────────┐                  │
    │materials_collect│                │
    │ (资料收集中)   │                  │
    └───────┬───────┘                  │
           │ SUBMIT_MATERIALS          │
           ▼                           │
    ┌───────────────┐                  │
    │materials_verified│               │
    │ (资料已验证)   │                  │
    └───────┬───────┘                  │
           │ VERIFY_MATERIALS          │
           │ COMPLETE_ONBOARD          │
           ▼                           │
    ┌───────────────┐                  │
    │   completed   │                  │
    │  (入职完成)   │                  │
    └───────┬───────┘                  │
           │                           │
           └───────────────────────────┘
    CANCEL ────────────────────────────► cancelled (已取消)
```

**事件定义**：
- `START_MATERIALS`: 开始资料收集
- `SUBMIT_MATERIALS`: 提交资料
- `VERIFY_MATERIALS`: 资料审核通过
- `COMPLETE_ONBOARD`: 完成入职
- `CANCEL`: 取消入职

---

## 四、页面字段表对齐（PageID）

### 4.1 问题描述

需求清单包含 58 个 PageID，实施计划文档未显式对齐。

### 4.2 修正方案

在每个实施计划文档的页面设计部分，添加 PageID 对应关系：

| 模块 | RQ编号 | PageID | 页面名称 | 按钮ID列表 | 异常场景ID列表 |
|------|--------|--------|----------|------------|----------------|
| M01 | RQ0001 | PG0001 | 组织架构 | BTN0001-0010 | EX0001-0003 |
| M01 | RQ0002 | PG0002 | 用户管理 | BTN0011-0020 | EX0004-0006 |
| ... | ... | ... | ... | ... | ... |
| M09 | RQ0062 | PG0062 | 考勤汇总报表 | BTN0250-0260 | EX0020-0022 |
| M09 | RQ0063 | PG0063 | 薪资汇总报表 | BTN0261-0270 | EX0023-0024 |
| M09 | RQ0064 | PG0064 | 分析看板 | BTN0271-0280 | EX0025 |
| M09 | RQ0065 | PG0065 | 自定义报表 | BTN0281-0290 | - |
| M10 | RQ0066 | PG0066 | AI对话助手 | BTN0291-0305 | - |
| M10 | RQ0067 | PG0067 | 团队概览总结 | BTN0306-0315 | - |
| M10 | RQ0068 | PG0068 | 组织健康度分析 | BTN0316-0325 | - |
| M10 | RQ0069 | PG0069 | AI建议与行动 | BTN0326-0340 | - |
| M10 | RQ0070 | PG0070 | AI输出留痕 | BTN0341-0350 | - |
| M10 | RQ0071 | PG0071 | 离职风险 | BTN0351-0365 | - |
| M10 | RQ0072 | PG0072 | What-if模拟 | BTN0366-0380 | - |

---

## 五、按钮字典对齐（BTN）

### 5.1 问题描述

需求清单包含 285 个按钮 ID，实施计划文档未显式对齐。

### 5.2 修正方案

在每个页面的交互设计中，添加按钮ID与功能的显式映射：

```markdown
### 页面按钮定义

| 按钮ID | 按钮名称 | 按钮类型 | 权限要求 | 触发事件 |
|--------|----------|----------|----------|----------|
| BTN0291 | 新建会话 | 主按钮 | ai:chat:create | openChatModal() |
| BTN0292 | 发送消息 | 主按钮 | ai:chat:send | sendMessage() |
| BTN0293 | 停止生成 | 次按钮 | ai:chat:read | stopGeneration() |
| BTN0294 | 复制回答 | 文字链接 | ai:chat:read | copyToClipboard() |
| BTN0295 | 重新生成 | 次按钮 | ai:chat:write | regenerateResponse() |
| ... | ... | ... | ... | ... |
```

---

## 六、异常场景对齐（EX）

### 6.1 问题描述

需求清单包含 25 个异常场景 ID，实施计划文档未显式对齐。

### 6.2 修正方案

在每个功能模块的异常处理部分，添加异常场景ID映射：

```markdown
### 异常场景定义

| 异常ID | 异常名称 | 触发条件 | 处理方式 | 提示信息 |
|--------|----------|----------|----------|----------|
| EX0001 | 组织不存在 | org_id无效 | 返回404 | "您访问的组织不存在" |
| EX0002 | 无权限访问 | 无org权限 | 返回403 | "您无权访问该组织" |
| ... | ... | ... | ... | ... |
| EX0020 | 报表数据为空 | 查询无结果 | 显示空态 | "暂无数据" |
| EX0021 | 生成超时 | AI生成>30s | 超时提示 | "生成超时，请重试" |
```

---

## 七、删除超额页面（RQ0073-0077）

### 7.1 问题描述

原Phase5文档新增了 RQ0073-0077，超出需求清单范围。

### 7.2 修正方案

**删除以下页面**：

| RQ编号 | PageID | 页面名称 | 处理建议 |
|--------|--------|----------|----------|
| RQ0073 | - | 报表配置 | 合并到 RQ0065（自定义报表） |
| RQ0074 | - | 看板中心 | 延后至Phase6 |
| RQ0075 | - | 看板查看 | 延后至Phase6 |
| RQ0076 | - | 看板编辑 | 延后至Phase6 |
| RQ0077 | - | HR驾驶舱 | 延后至Phase6 |

---

## 八、模块联动修正（LK）

### 8.1 问题描述

原模块联动设计（LK0001-LK0008）缺少对 AI 能力中心的联动支持。

### 8.2 修正方案

新增 AI 能力中心联动场景：

| 联动编号 | 触发事件 | AI模块响应 | 后续动作 |
|----------|----------|------------|----------|
| LK0009 | 员工离职风险预警 | AIAction生成→HR处理 | 创建跟进工单(M08) |
| LK0010 | 编制超限预警 | AIAction生成→HR审批 | 暂停招聘需求(M03) |
| LK0011 | 绩效结果生成 | AI-SC-005生成评语 | 绩效评估(M07) |
| LK0012 | 入职完成 | AI-SC-006生成适应建议 | 入职任务(M04) |

---

## 九、AI场景与口径修正

### 9.1 问题描述

需求清单 AI 场景（AI-SC-001 至 AI-SC-012）与实施计划文档部分不一致。

### 9.2 修正方案

| AI场景ID | 场景名称 | 关联页面 | 修正状态 |
|----------|----------|----------|----------|
| AI-SC-001 | AI自然语言查询 | PG0066 | ✅ |
| AI-SC-002 | AI花名册洞察 | PG0067 | ✅ |
| AI-SC-003 | AI团队对比分析 | PG0067 | ✅ |
| AI-SC-004 | AI组织健康度 | PG0068 | ✅ |
| AI-SC-005 | AI绩效评语生成 | M07 | ✅ |
| AI-SC-006 | AI入职适应建议 | M04 | ✅ |
| AI-SC-007 | AI人才画像与推荐 | M03 | ✅ |
| AI-SC-008 | AI输出留痕与审计 | PG0070 | ✅ |
| AI-SC-009 | AI离职风险识别 | PG0071 | ✅ |
| AI-SC-010 | AI What-if模拟 | PG0072 | ✅ |
| AI-SC-011 | AI工单路由 | M08 | ✅ |
| AI-SC-012 | AI面试评价建议 | M03 | ✅ |

---

## 十、实施建议

### 10.1 优先级排序

1. **P0（立即修复）**：
   - 修正 RQ0062-0072 模块归属
   - 补全 OnboardingTask 状态机
   - 删除 RQ0073-0077

2. **P1（下一版本）**：
   - 对齐 PageID/BTN/EX
   - 完善 OvertimeRequest 状态机文档
   - 新增 LK0009-LK0012 AI联动

3. **P2（后续规划）**：
   - 看板中心、HR驾驶舱（延后至Phase6）
   - 报表配置增强

### 10.2 验收标准

- [ ] 页面级需求数量 = 72
- [ ] RQ0062-0065 归属 M09，RQ0066-0072 归属 M10
- [ ] 状态机对象数量 = 10
- [ ] 页面字段表 PageID 全部对齐
- [ ] 按钮字典 BTN 全部对齐
- [ ] 异常场景 EX 全部对齐
- [ ] 无超额页面（RQ0073-0077已删除）

---

## 附录：修正文件清单

| 文件路径 | 修正内容 |
|----------|----------|
| `docs/实现计划/05-Phase5-AI能力中心.md` | RQ归属修正，删除RQ0073-0077 |
| `docs/实现计划/01-Phase1-基础业务模块.md` | PageID/BTN/EX对齐 |
| `docs/实现计划/02-Phase2-招聘与入职.md` | PageID/BTN/EX对齐 |
| `docs/实现计划/03-Phase3-考勤薪酬.md` | PageID/BTN/EX对齐，OvertimeRequest状态机 |
| `docs/实现计划/04-Phase4-绩效与工单.md` | PageID/BTN/EX对齐 |
| `docs/实现计划/06-Phase6-模块联动.md` | 新增LK0009-LK0012 |
| `docs/实现计划/不符合需求清单.md` | 本修正文档替代 |

---

> **说明**：本修正文档作为 `HR_AI_SaaS需求清单.xlsx` 与实施计划文档的中间桥梁，确保两者保持一致。后续实施计划文档更新时，应以本修正文档为准进行对照。
