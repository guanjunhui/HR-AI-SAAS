# HR AI SaaS 系统完整实现计划

> 创建日期: 2025-01-30
> 最后更新: 2025-01-30

## 项目概述

**技术栈**：
- 后端：Spring Boot 3.2.2 + Spring AI Alibaba 1.1.0.0-RC2 + MySQL 8.0 + Redis + Milvus 2.5.4 + Kafka + Nacos 3.x
- 前端：React + Ant Design Pro
- 已完成：项目骨架、12张Agent相关表、Docker环境、配置类

**需求范围**：
- 10个业务模块（M01-M10）
- 72个页面需求
- 12个AI场景
- 8种状态机
- 多模块联动

---

## 分阶段实现计划

| 阶段 | 核心内容 | 数据库表 | Controller | Service | 前端页面 |
|------|----------|----------|------------|---------|----------|
| Phase 1 | 基础业务模块（组织权限 + Core HR） | 11张 | 8个 | 8个 | 20个 |
| Phase 2 | 招聘与入职（ATS + Onboarding） | 9张 | 6个 | 8个 | 15个 |
| Phase 3 | 考勤薪酬（考勤假勤 + 薪资） | 12张 | 8个 | 12个 | 12个 |
| Phase 4 | 绩效与员工关系（绩效 + 工单） | 8张 | 6个 | 8个 | 14个 |
| Phase 5 | AI能力中心与报表 | 7张 | 8个 | 15个 | 16个 |
| Phase 6 | 模块联动与优化 | 0张 | 0个 | 8个(联动) | 0个 |
| **总计** | - | **47张** | **36个** | **59个** | **77个** |

---

## 模块清单

| 模块ID | 模块名称 | 主要功能 | 相关AI场景 |
|--------|----------|----------|------------|
| M01 | 组织与权限 | 组织架构、用户、角色、审计日志 | - |
| M02 | Core HR | 岗位、编制、员工档案、人事事件 | - |
| M03 | 招聘管理 | 招聘需求、候选人、面试、Offer | AI简历解析、智能匹配 |
| M04 | 入职Onboarding | 入职流程、资料收集、任务跟踪 | - |
| M05 | 考勤假勤 | 班次、打卡、请假、加班 | - |
| M06 | 薪酬薪资 | 薪酬项目、算薪批次、工资条 | AI薪资解释 |
| M07 | 绩效管理 | 绩效周期、目标、评估、结果 | AI绩效评语 |
| M08 | 工单系统 | 工单类型、工单处理、知识库 | AI智能路由、答案建议 |
| M09 | 报表与分析 | 报表配置、看板、数据导出 | 自然语言查询 |
| M10 | AI能力中心 | AI对话、洞察、建议池、审计 | 全部12个场景 |

---

## AI场景清单

| 场景ID | 场景名称 | 需求ID | 核心服务/Agent |
|--------|----------|--------|----------------|
| AI-SC-001 | 自然语言查询 | RQ0066 | AnalyticsAgent + QueryFunctions |
| AI-SC-002 | 政策问答 | RQ0066 | HRPolicyAgent + RAGService |
| AI-SC-003 | 团队概览 | RQ0067 | TeamOverviewService |
| AI-SC-004 | 稳定性分析 | RQ0068 | StabilityAnalysisService |
| AI-SC-005 | 组织健康度 | RQ0068 | OrgHealthService |
| AI-SC-006 | 编制合理性 | RQ0068 | HeadcountAnalysisService |
| AI-SC-007 | 建议池 | RQ0069 | SuggestionPoolService |
| AI-SC-008 | 输出留痕 | RQ0070 | AIOutputAuditService |
| AI-SC-009 | 离职风险 | RQ0071 | TurnoverRiskService |
| AI-SC-010 | What-if模拟 | RQ0072 | WhatIfSimulationService |
| AI-SC-011 | 薪资解释 | RQ0066 | PayrollExplainerAgent |
| AI-SC-012 | 绩效评语 | RQ0066 | PerformanceCommentGenerator |

---

## 状态机清单

| 对象 | 状态流转 | 实现类 | 所属模块 |
|------|----------|--------|----------|
| EmploymentEvent | draft→pending→approved/rejected→effective | EmploymentEventStateMachine | M02 |
| JobRequisition | draft→pending→open→paused/closed | JobRequisitionStateMachine | M03 |
| Candidate | new→screening→interviewing→offering→onboarded | CandidateStateMachine | M03 |
| LeaveRequest | draft→pending→approved/rejected | LeaveRequestStateMachine | M05 |
| PayrollRun | draft→calculating→reviewing→paid | PayrollRunStateMachine | M06 |
| PerformanceCycle | not_started→in_progress→completed | PerformanceCycleStateMachine | M07 |
| Ticket | new→assigned→in_progress→resolved→closed | TicketStateMachine | M08 |
| AIAction | generated→adopted→executed | AIActionStateMachine | M10 |

---

## 模块联动清单

| 联动ID | 上游模块 | 触发事件 | 下游模块 | 实现方式 |
|--------|----------|----------|----------|----------|
| LK0001 | Core HR | 岗位编制调整 | 招聘管理 | EventListener |
| LK0002 | 招聘管理 | Offer接受 | 入职Onboarding | EventListener |
| LK0003 | Onboarding | 资料审核通过 | Core HR | EventListener |
| LK0004 | 考勤假勤 | 月度汇总 | 薪资 | Service调用 |
| LK0005 | 绩效管理 | 结果归档 | AI能力中心 | EventListener |
| LK0006 | AI能力中心 | 采纳建议 | 招聘管理 | AIActionExecutor |
| LK0007 | AI能力中心 | 采纳建议 | Core HR | AIActionExecutor |
| LK0008 | AI能力中心 | 采纳建议 | 工单 | AIActionExecutor |

---

## 详细计划文档索引

| 文档 | 内容 |
|------|------|
| [01-Phase1-基础业务模块.md](./01-Phase1-基础业务模块.md) | 组织权限 + Core HR 详细设计 |
| [02-Phase2-招聘与入职.md](./02-Phase2-招聘与入职.md) | 招聘管理 + 入职 详细设计 |
| [03-Phase3-考勤薪酬.md](./03-Phase3-考勤薪酬.md) | 考勤假勤 + 薪资 详细设计 |
| [04-Phase4-绩效与工单.md](./04-Phase4-绩效与工单.md) | 绩效管理 + 工单系统 详细设计 |
| [05-Phase5-AI能力中心.md](./05-Phase5-AI能力中心.md) | AI能力中心 + 报表 详细设计 |
| [06-Phase6-模块联动.md](./06-Phase6-模块联动.md) | 模块联动与优化 |
| [07-数据库表清单.md](./07-数据库表清单.md) | 所有47张表的完整DDL |
| [08-后端包结构.md](./08-后端包结构.md) | 后端代码组织结构 |
| [09-前端项目结构.md](./09-前端项目结构.md) | 前端页面与组件结构 |
| [10-API接口清单.md](./10-API接口清单.md) | RESTful API 接口定义 |

---

## 关键文件路径

### 后端（已存在）
- 数据库Schema: `hr-ai-agent-core/src/main/resources/db/schema.sql`
- 配置文件: `hr-ai-agent-core/src/main/resources/application.yml`
- Bootstrap配置: `hr-ai-agent-core/src/main/resources/bootstrap.yml`
- Agent配置: `hr-ai-agent-core/src/main/resources/config/agent-config.yml`
- 启动类: `hr-ai-agent-core/src/main/java/com/hrai/agent/AgentApplication.java`
- Milvus配置: `hr-ai-agent-core/src/main/java/com/hrai/agent/config/MilvusConfig.java`
- Kafka配置: `hr-ai-agent-core/src/main/java/com/hrai/agent/config/KafkaConfig.java`
- MCP配置: `hr-ai-agent-core/src/main/java/com/hrai/agent/config/McpServerConfig.java`
- 租户上下文: `hr-ai-common/src/main/java/com/hrai/common/context/TenantContext.java`

### 前端（待创建）
- 项目根目录: `hr-ai-web/`
- 路由配置: `hr-ai-web/config/routes.ts`
- API服务: `hr-ai-web/src/services/`
- 页面组件: `hr-ai-web/src/pages/`

---

## 验证方式

### Phase 1 验证
1. 组织树CRUD测试
2. 用户角色权限测试
3. 员工花名册导入导出
4. 人事事件审批流程测试

### Phase 2-4 验证
1. 招聘全流程测试（需求→候选人→面试→Offer→入职）
2. 考勤打卡与请假审批测试
3. 算薪批次计算验证
4. 绩效周期全流程测试
5. 工单创建与处理测试

### Phase 5 验证
1. AI对话测试（自然语言查询、政策问答）
2. AI洞察生成测试（团队概览、稳定性分析）
3. AI建议采纳与执行测试
4. 报表导出测试

### Phase 6 验证
1. 模块联动端到端测试
2. 状态机流转测试
3. 性能压测
4. 多租户隔离测试

---

*本文档为项目实现总体规划，详细设计请参阅各阶段文档*
