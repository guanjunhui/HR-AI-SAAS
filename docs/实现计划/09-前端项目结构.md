# 前端项目结构设计

> React + Ant Design Pro 项目结构

## 技术栈

- **框架**: React 18 + TypeScript
- **UI库**: Ant Design 5.x + Ant Design Pro Components
- **状态管理**: Zustand / Redux Toolkit
- **请求库**: Axios + React Query
- **路由**: React Router 6
- **构建工具**: Vite
- **图表**: ECharts / Ant Design Charts

---

## 项目结构

```
hr-ai-web/
├── package.json
├── vite.config.ts
├── tsconfig.json
├── .env.development
├── .env.production
│
├── public/
│   └── favicon.ico
│
├── src/
│   ├── main.tsx                      # 入口文件
│   ├── App.tsx                       # 根组件
│   ├── vite-env.d.ts                 # 类型声明
│   │
│   ├── assets/                       # 静态资源
│   │   ├── images/
│   │   └── styles/
│   │       ├── global.less
│   │       └── variables.less
│   │
│   ├── config/                       # 配置
│   │   ├── routes.tsx                # 路由配置
│   │   ├── menu.tsx                  # 菜单配置
│   │   └── settings.ts               # 全局设置
│   │
│   ├── layouts/                      # 布局组件
│   │   ├── BasicLayout/              # 基础布局
│   │   │   ├── index.tsx
│   │   │   └── index.less
│   │   ├── UserLayout/               # 登录布局
│   │   └── BlankLayout/              # 空白布局
│   │
│   ├── components/                   # 公共组件
│   │   ├── common/                   # 通用组件
│   │   │   ├── OrgTreeSelect/
│   │   │   ├── EmployeeSelect/
│   │   │   ├── PositionSelect/
│   │   │   ├── ApprovalFlow/
│   │   │   ├── StatusTag/
│   │   │   ├── AuditTimeline/
│   │   │   └── FileUpload/
│   │   │
│   │   ├── ai/                       # AI相关组件
│   │   │   ├── ChatPanel/
│   │   │   ├── InsightCard/
│   │   │   ├── SuggestionCard/
│   │   │   ├── WhatIfSimulator/
│   │   │   └── StreamingText/
│   │   │
│   │   ├── report/                   # 报表组件
│   │   │   ├── ChartWidgets/
│   │   │   ├── DataTable/
│   │   │   ├── DashboardEditor/
│   │   │   └── FilterPanel/
│   │   │
│   │   └── business/                 # 业务组件
│   │       ├── EmployeeCard/
│   │       ├── CandidateCard/
│   │       ├── TicketCard/
│   │       └── PayslipViewer/
│   │
│   ├── pages/                        # 页面组件
│   │   │
│   │   ├── login/                    # 登录页
│   │   │   └── index.tsx
│   │   │
│   │   ├── org/                      # M01 组织与权限
│   │   │   ├── OrgUnit/
│   │   │   │   ├── index.tsx         # 组织列表
│   │   │   │   └── Detail.tsx        # 组织详情
│   │   │   ├── User/
│   │   │   │   ├── index.tsx         # 用户列表
│   │   │   │   └── Detail.tsx        # 用户详情
│   │   │   ├── Role/
│   │   │   │   ├── index.tsx         # 角色列表
│   │   │   │   └── Detail.tsx        # 角色详情
│   │   │   └── AuditLog/
│   │   │       └── index.tsx         # 审计日志
│   │   │
│   │   ├── hr/                       # M02 Core HR
│   │   │   ├── Position/
│   │   │   │   ├── index.tsx         # 岗位列表
│   │   │   │   └── Detail.tsx        # 岗位详情
│   │   │   ├── Headcount/
│   │   │   │   └── index.tsx         # 编制配置
│   │   │   ├── Employee/
│   │   │   │   ├── List/
│   │   │   │   │   └── index.tsx     # 花名册
│   │   │   │   └── Detail/
│   │   │   │       ├── index.tsx     # 员工档案
│   │   │   │       ├── BasicInfo.tsx # 基本信息Tab
│   │   │   │       ├── Contract.tsx  # 合同信息Tab
│   │   │   │       ├── Salary.tsx    # 薪资信息Tab
│   │   │   │       └── History.tsx   # 历史记录Tab
│   │   │   └── Event/
│   │   │       ├── Onboard/
│   │   │       │   ├── index.tsx     # 入职申请列表
│   │   │       │   └── Form.tsx      # 入职申请表单
│   │   │       ├── Regularize/
│   │   │       │   ├── index.tsx     # 转正申请列表
│   │   │       │   └── Form.tsx      # 转正申请表单
│   │   │       ├── Transfer/
│   │   │       │   ├── index.tsx     # 调岗申请列表
│   │   │       │   └── Form.tsx      # 调岗申请表单
│   │   │       ├── SalaryChange/
│   │   │       │   ├── index.tsx     # 调薪申请列表
│   │   │       │   └── Form.tsx      # 调薪申请表单
│   │   │       └── Resign/
│   │   │           ├── index.tsx     # 离职申请列表
│   │   │           └── Form.tsx      # 离职申请表单
│   │   │
│   │   ├── recruiting/               # M03 招聘管理
│   │   │   ├── Requisition/
│   │   │   │   ├── index.tsx         # 招聘需求列表
│   │   │   │   └── Detail.tsx        # 需求详情
│   │   │   ├── Candidate/
│   │   │   │   ├── index.tsx         # 候选人列表
│   │   │   │   └── Detail.tsx        # 候选人360视图
│   │   │   ├── Interview/
│   │   │   │   ├── Calendar.tsx      # 面试日历
│   │   │   │   ├── Detail.tsx        # 面试详情
│   │   │   │   └── Feedback.tsx      # 面试反馈表单
│   │   │   ├── Offer/
│   │   │   │   ├── index.tsx         # Offer列表
│   │   │   │   └── Detail.tsx        # Offer详情
│   │   │   └── Board/
│   │   │       └── index.tsx         # 招聘看板
│   │   │
│   │   ├── onboarding/               # M04 入职Onboarding
│   │   │   ├── Pending/
│   │   │   │   └── index.tsx         # 待入职列表
│   │   │   ├── Detail/
│   │   │   │   └── index.tsx         # 入职详情
│   │   │   ├── Materials/
│   │   │   │   └── index.tsx         # 资料上传(员工自助)
│   │   │   ├── Verify/
│   │   │   │   └── index.tsx         # 资料审核(HR)
│   │   │   └── Welcome/
│   │   │       └── index.tsx         # 入职欢迎页
│   │   │
│   │   ├── attendance/               # M05 考勤假勤
│   │   │   ├── Shift/
│   │   │   │   └── index.tsx         # 班次管理
│   │   │   ├── Rule/
│   │   │   │   └── index.tsx         # 考勤规则
│   │   │   ├── Record/
│   │   │   │   └── index.tsx         # 打卡记录
│   │   │   ├── Summary/
│   │   │   │   └── index.tsx         # 考勤汇总
│   │   │   ├── Leave/
│   │   │   │   ├── index.tsx         # 请假列表
│   │   │   │   └── Apply.tsx         # 请假申请
│   │   │   └── Overtime/
│   │   │       ├── index.tsx         # 加班列表
│   │   │       └── Apply.tsx         # 加班申请
│   │   │
│   │   ├── payroll/                  # M06 薪酬薪资
│   │   │   ├── Item/
│   │   │   │   └── index.tsx         # 薪酬项目
│   │   │   ├── Archive/
│   │   │   │   └── index.tsx         # 薪资档案
│   │   │   ├── Run/
│   │   │   │   ├── index.tsx         # 算薪批次
│   │   │   │   └── Detail.tsx        # 批次明细
│   │   │   ├── Payslip/
│   │   │   │   ├── index.tsx         # 工资条管理
│   │   │   │   └── My.tsx            # 我的工资条
│   │   │   └── export/
│   │   │       └── index.tsx         # 薪资导出
│   │   │
│   │   ├── performance/              # M07 绩效管理
│   │   │   ├── Cycle/
│   │   │   │   ├── index.tsx         # 绩效周期列表
│   │   │   │   └── Detail.tsx        # 周期详情
│   │   │   ├── Goal/
│   │   │   │   ├── My.tsx            # 我的目标
│   │   │   │   └── Team.tsx          # 团队目标
│   │   │   ├── Review/
│   │   │   │   ├── index.tsx         # 评估工作台
│   │   │   │   └── Form.tsx          # 评估表单
│   │   │   ├── Calibration/
│   │   │   │   └── index.tsx         # 绩效校准
│   │   │   └── Result/
│   │   │       └── index.tsx         # 绩效结果
│   │   │
│   │   ├── ticket/                   # M08 工单系统
│   │   │   ├── Type/
│   │   │   │   └── index.tsx         # 工单类型
│   │   │   ├── Board/
│   │   │   │   └── index.tsx         # 工单看板
│   │   │   ├── List/
│   │   │   │   └── index.tsx         # 工单列表
│   │   │   ├── Detail/
│   │   │   │   └── index.tsx         # 工单详情
│   │   │   ├── Create/
│   │   │   │   └── index.tsx         # 提交工单
│   │   │   └── Knowledge/
│   │   │       ├── index.tsx         # 知识库首页
│   │   │       └── Article.tsx       # 文章详情
│   │   │
│   │   ├── report/                   # M09 报表与分析
│   │   │   ├── List/
│   │   │   │   └── index.tsx         # 报表中心
│   │   │   ├── View/
│   │   │   │   └── index.tsx         # 报表查看
│   │   │   ├── Config/
│   │   │   │   └── index.tsx         # 报表配置
│   │   │   ├── Dashboard/
│   │   │   │   ├── List.tsx          # 看板列表
│   │   │   │   ├── View.tsx          # 看板查看
│   │   │   │   └── Edit.tsx          # 看板编辑
│   │   │   └── HRCockpit/
│   │   │       └── index.tsx         # HR驾驶舱
│   │   │
│   │   └── ai/                       # M10 AI能力中心
│   │       ├── Chat/
│   │       │   └── index.tsx         # AI助手
│   │       ├── Insight/
│   │       │   ├── Team.tsx          # 团队洞察
│   │       │   ├── Turnover.tsx      # 离职风险
│   │       │   └── OrgHealth.tsx     # 组织健康
│   │       ├── Suggestion/
│   │       │   └── index.tsx         # 建议池
│   │       ├── WhatIf/
│   │       │   └── index.tsx         # What-if模拟
│   │       ├── Audit/
│   │       │   └── index.tsx         # AI审计
│   │       ├── Action/
│   │       │   └── index.tsx         # 行动管理
│   │       └── Settings/
│   │           └── index.tsx         # AI设置
│   │
│   ├── services/                     # API服务
│   │   ├── request.ts                # Axios封装
│   │   ├── org.ts                    # 组织模块API
│   │   ├── hr.ts                     # HR模块API
│   │   ├── recruiting.ts             # 招聘模块API
│   │   ├── onboarding.ts             # 入职模块API
│   │   ├── attendance.ts             # 考勤模块API
│   │   ├── payroll.ts                # 薪酬模块API
│   │   ├── performance.ts            # 绩效模块API
│   │   ├── ticket.ts                 # 工单模块API
│   │   ├── report.ts                 # 报表模块API
│   │   └── ai.ts                     # AI模块API
│   │
│   ├── models/                       # 数据模型/类型
│   │   ├── common.ts                 # 通用类型
│   │   ├── org.ts                    # 组织类型
│   │   ├── hr.ts                     # HR类型
│   │   ├── recruiting.ts             # 招聘类型
│   │   ├── attendance.ts             # 考勤类型
│   │   ├── payroll.ts                # 薪酬类型
│   │   ├── performance.ts            # 绩效类型
│   │   ├── ticket.ts                 # 工单类型
│   │   └── ai.ts                     # AI类型
│   │
│   ├── stores/                       # 状态管理
│   │   ├── useUserStore.ts           # 用户状态
│   │   ├── useTenantStore.ts         # 租户状态
│   │   └── useAppStore.ts            # 应用状态
│   │
│   ├── hooks/                        # 自定义Hooks
│   │   ├── useAuth.ts                # 认证Hook
│   │   ├── usePermission.ts          # 权限Hook
│   │   ├── useOrgTree.ts             # 组织树Hook
│   │   ├── useEmployeeSelect.ts      # 员工选择Hook
│   │   └── useSSE.ts                 # SSE Hook
│   │
│   └── utils/                        # 工具函数
│       ├── format.ts                 # 格式化
│       ├── validate.ts               # 校验
│       ├── storage.ts                # 存储
│       └── constants.ts              # 常量
│
└── mock/                             # Mock数据
    ├── org.ts
    ├── hr.ts
    └── ...
```

---

## 页面统计

| 模块 | 页面数 | 主要页面 |
|------|--------|----------|
| login | 1 | 登录页 |
| org | 5 | 组织、用户、角色、审计 |
| hr | 15 | 岗位、编制、员工、人事事件 |
| recruiting | 10 | 招聘需求、候选人、面试、Offer、看板 |
| onboarding | 5 | 待入职、详情、资料、欢迎 |
| attendance | 6 | 班次、规则、打卡、汇总、请假、加班 |
| payroll | 6 | 薪酬项目、档案、算薪、工资条 |
| performance | 7 | 周期、目标、评估、校准、结果 |
| ticket | 7 | 类型、看板、列表、详情、创建、知识库 |
| report | 7 | 报表中心、看板、HR驾驶舱 |
| ai | 9 | AI助手、洞察、建议、模拟、审计 |
| **总计** | **78** | - |

---

## 路由配置

```tsx
// src/config/routes.tsx
import { RouteObject } from 'react-router-dom';

const routes: RouteObject[] = [
  {
    path: '/login',
    element: <UserLayout />,
    children: [
      { path: '', element: <LoginPage /> }
    ]
  },
  {
    path: '/',
    element: <BasicLayout />,
    children: [
      // 组织与权限
      {
        path: 'org',
        children: [
          { path: 'units', element: <OrgUnitList /> },
          { path: 'units/:id', element: <OrgUnitDetail /> },
          { path: 'users', element: <UserList /> },
          { path: 'users/:id', element: <UserDetail /> },
          { path: 'roles', element: <RoleList /> },
          { path: 'audit-logs', element: <AuditLogList /> },
        ]
      },

      // Core HR
      {
        path: 'hr',
        children: [
          { path: 'positions', element: <PositionList /> },
          { path: 'positions/:id', element: <PositionDetail /> },
          { path: 'headcounts', element: <HeadcountList /> },
          { path: 'employees', element: <EmployeeList /> },
          { path: 'employees/:id', element: <EmployeeDetail /> },
          { path: 'events/onboard', element: <OnboardEventList /> },
          { path: 'events/onboard/create', element: <OnboardEventForm /> },
          { path: 'events/regularize', element: <RegularizeEventList /> },
          { path: 'events/transfer', element: <TransferEventList /> },
          { path: 'events/salary-change', element: <SalaryChangeEventList /> },
          { path: 'events/resign', element: <ResignEventList /> },
        ]
      },

      // 招聘管理
      {
        path: 'recruiting',
        children: [
          { path: 'requisitions', element: <RequisitionList /> },
          { path: 'requisitions/:id', element: <RequisitionDetail /> },
          { path: 'candidates', element: <CandidateList /> },
          { path: 'candidates/:id', element: <CandidateDetail /> },
          { path: 'interviews/calendar', element: <InterviewCalendar /> },
          { path: 'interviews/:id', element: <InterviewDetail /> },
          { path: 'interviews/:id/feedback', element: <InterviewFeedback /> },
          { path: 'offers', element: <OfferList /> },
          { path: 'offers/:id', element: <OfferDetail /> },
          { path: 'board', element: <RecruitingBoard /> },
        ]
      },

      // 入职
      {
        path: 'onboarding',
        children: [
          { path: 'pending', element: <OnboardingPending /> },
          { path: ':id', element: <OnboardingDetail /> },
          { path: ':id/materials', element: <OnboardingMaterials /> },
          { path: ':id/verify', element: <OnboardingVerify /> },
          { path: ':id/welcome', element: <OnboardingWelcome /> },
        ]
      },

      // 考勤假勤
      {
        path: 'attendance',
        children: [
          { path: 'shifts', element: <ShiftList /> },
          { path: 'rules', element: <AttendanceRuleList /> },
          { path: 'records', element: <AttendanceRecordList /> },
          { path: 'summary', element: <AttendanceSummary /> },
          { path: 'leave', element: <LeaveRequestList /> },
          { path: 'leave/apply', element: <LeaveApply /> },
          { path: 'overtime', element: <OvertimeRequestList /> },
          { path: 'overtime/apply', element: <OvertimeApply /> },
        ]
      },

      // 薪酬薪资
      {
        path: 'payroll',
        children: [
          { path: 'items', element: <SalaryItemList /> },
          { path: 'archives', element: <SalaryArchiveList /> },
          { path: 'runs', element: <PayrollRunList /> },
          { path: 'runs/:id', element: <PayrollRunDetail /> },
          { path: 'payslips', element: <PayslipList /> },
          { path: 'payslips/my', element: <MyPayslip /> },
        ]
      },

      // 绩效管理
      {
        path: 'performance',
        children: [
          { path: 'cycles', element: <PerformanceCycleList /> },
          { path: 'cycles/:id', element: <PerformanceCycleDetail /> },
          { path: 'goals/my', element: <MyGoals /> },
          { path: 'goals/team', element: <TeamGoals /> },
          { path: 'reviews', element: <PerformanceReviewList /> },
          { path: 'calibration', element: <Calibration /> },
          { path: 'results', element: <PerformanceResultList /> },
        ]
      },

      // 工单系统
      {
        path: 'tickets',
        children: [
          { path: 'types', element: <TicketTypeList /> },
          { path: 'board', element: <TicketBoard /> },
          { path: 'list', element: <TicketList /> },
          { path: ':id', element: <TicketDetail /> },
          { path: 'create', element: <TicketCreate /> },
        ]
      },

      // 知识库
      {
        path: 'knowledge',
        children: [
          { path: '', element: <KnowledgeHome /> },
          { path: ':id', element: <KnowledgeArticle /> },
        ]
      },

      // 报表与分析
      {
        path: 'reports',
        children: [
          { path: '', element: <ReportList /> },
          { path: ':code', element: <ReportView /> },
          { path: ':code/config', element: <ReportConfig /> },
        ]
      },
      {
        path: 'dashboards',
        children: [
          { path: '', element: <DashboardList /> },
          { path: 'hr', element: <HRCockpit /> },
          { path: ':id', element: <DashboardView /> },
          { path: ':id/edit', element: <DashboardEdit /> },
        ]
      },

      // AI能力中心
      {
        path: 'ai',
        children: [
          { path: 'chat', element: <AIChat /> },
          { path: 'insights/team', element: <TeamInsight /> },
          { path: 'insights/turnover', element: <TurnoverRisk /> },
          { path: 'insights/org-health', element: <OrgHealth /> },
          { path: 'suggestions', element: <SuggestionPool /> },
          { path: 'whatif', element: <WhatIfSimulation /> },
          { path: 'audit', element: <AIAudit /> },
          { path: 'actions', element: <AIActions /> },
          { path: 'settings', element: <AISettings /> },
        ]
      },
    ]
  },

  // 404
  { path: '*', element: <NotFound /> }
];

export default routes;
```

---

## 组件设计

### 通用组件示例

#### OrgTreeSelect - 组织选择器

```tsx
// src/components/common/OrgTreeSelect/index.tsx
import { TreeSelect, TreeSelectProps } from 'antd';
import { useOrgTree } from '@/hooks/useOrgTree';

interface OrgTreeSelectProps extends Omit<TreeSelectProps, 'treeData'> {
  tenantId?: string;
  excludeIds?: number[];
  showDisabled?: boolean;
}

export const OrgTreeSelect: React.FC<OrgTreeSelectProps> = ({
  tenantId,
  excludeIds = [],
  showDisabled = false,
  ...props
}) => {
  const { data: treeData, isLoading } = useOrgTree(tenantId);

  const filteredData = useMemo(() => {
    if (!treeData) return [];
    return filterTree(treeData, excludeIds, showDisabled);
  }, [treeData, excludeIds, showDisabled]);

  return (
    <TreeSelect
      loading={isLoading}
      treeData={filteredData}
      fieldNames={{ label: 'name', value: 'id', children: 'children' }}
      showSearch
      treeNodeFilterProp="name"
      placeholder="请选择组织"
      {...props}
    />
  );
};
```

#### StatusTag - 状态标签

```tsx
// src/components/common/StatusTag/index.tsx
import { Tag, TagProps } from 'antd';

interface StatusConfig {
  text: string;
  color: string;
}

const STATUS_CONFIG: Record<string, Record<string, StatusConfig>> = {
  employee: {
    trial: { text: '试用期', color: 'orange' },
    regular: { text: '正式', color: 'green' },
    resigned: { text: '已离职', color: 'default' },
  },
  event: {
    draft: { text: '草稿', color: 'default' },
    pending: { text: '审批中', color: 'processing' },
    approved: { text: '已通过', color: 'success' },
    rejected: { text: '已驳回', color: 'error' },
  },
  // ... 其他状态
};

interface StatusTagProps extends Omit<TagProps, 'color'> {
  type: string;
  status: string;
}

export const StatusTag: React.FC<StatusTagProps> = ({ type, status, ...props }) => {
  const config = STATUS_CONFIG[type]?.[status];

  if (!config) {
    return <Tag {...props}>{status}</Tag>;
  }

  return (
    <Tag color={config.color} {...props}>
      {config.text}
    </Tag>
  );
};
```

### AI组件示例

#### ChatPanel - AI对话面板

```tsx
// src/components/ai/ChatPanel/index.tsx
import { useRef, useState, useEffect } from 'react';
import { Input, Button, Spin } from 'antd';
import { SendOutlined } from '@ant-design/icons';
import { useSSE } from '@/hooks/useSSE';
import { MessageList } from './MessageList';
import styles from './index.module.less';

interface Message {
  id: string;
  role: 'user' | 'assistant';
  content: string;
  citations?: Citation[];
  createdAt: string;
}

export const ChatPanel: React.FC = () => {
  const [messages, setMessages] = useState<Message[]>([]);
  const [input, setInput] = useState('');
  const [isStreaming, setIsStreaming] = useState(false);
  const messagesEndRef = useRef<HTMLDivElement>(null);

  const { connect, close } = useSSE();

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  };

  useEffect(() => {
    scrollToBottom();
  }, [messages]);

  const handleSend = async () => {
    if (!input.trim() || isStreaming) return;

    const userMessage: Message = {
      id: Date.now().toString(),
      role: 'user',
      content: input,
      createdAt: new Date().toISOString(),
    };

    setMessages(prev => [...prev, userMessage]);
    setInput('');
    setIsStreaming(true);

    // 创建AI回复占位
    const assistantMessage: Message = {
      id: (Date.now() + 1).toString(),
      role: 'assistant',
      content: '',
      createdAt: new Date().toISOString(),
    };
    setMessages(prev => [...prev, assistantMessage]);

    // SSE流式接收
    connect('/api/ai/chat/stream', {
      method: 'POST',
      body: JSON.stringify({ message: input }),
      onMessage: (data) => {
        setMessages(prev => {
          const newMessages = [...prev];
          const lastMessage = newMessages[newMessages.length - 1];
          if (lastMessage.role === 'assistant') {
            lastMessage.content += data.content || '';
            if (data.citations) {
              lastMessage.citations = data.citations;
            }
          }
          return newMessages;
        });
      },
      onComplete: () => {
        setIsStreaming(false);
      },
      onError: (error) => {
        console.error('Chat error:', error);
        setIsStreaming(false);
      },
    });
  };

  return (
    <div className={styles.chatPanel}>
      <div className={styles.messageArea}>
        <MessageList messages={messages} />
        <div ref={messagesEndRef} />
        {isStreaming && <Spin size="small" />}
      </div>

      <div className={styles.inputArea}>
        <Input.TextArea
          value={input}
          onChange={e => setInput(e.target.value)}
          onPressEnter={e => {
            if (!e.shiftKey) {
              e.preventDefault();
              handleSend();
            }
          }}
          placeholder="输入问题..."
          autoSize={{ minRows: 1, maxRows: 4 }}
          disabled={isStreaming}
        />
        <Button
          type="primary"
          icon={<SendOutlined />}
          onClick={handleSend}
          loading={isStreaming}
        >
          发送
        </Button>
      </div>
    </div>
  );
};
```

---

## API服务封装

```tsx
// src/services/request.ts
import axios, { AxiosInstance, AxiosRequestConfig } from 'axios';
import { message } from 'antd';
import { getToken, getTenantId } from '@/utils/storage';

const request: AxiosInstance = axios.create({
  baseURL: import.meta.env.VITE_API_BASE_URL,
  timeout: 30000,
});

// 请求拦截器
request.interceptors.request.use(
  (config) => {
    const token = getToken();
    const tenantId = getTenantId();

    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    if (tenantId) {
      config.headers['X-Tenant-Id'] = tenantId;
    }

    return config;
  },
  (error) => Promise.reject(error)
);

// 响应拦截器
request.interceptors.response.use(
  (response) => {
    const { code, message: msg, data } = response.data;

    if (code === 200) {
      return data;
    }

    message.error(msg || '请求失败');
    return Promise.reject(new Error(msg));
  },
  (error) => {
    if (error.response?.status === 401) {
      // 跳转登录
      window.location.href = '/login';
    }

    message.error(error.message || '网络错误');
    return Promise.reject(error);
  }
);

export default request;
```

```tsx
// src/services/hr.ts
import request from './request';
import { Employee, EmployeeCreate, PageResult, PageParams } from '@/models/hr';

export const employeeApi = {
  // 员工列表
  list: (params: PageParams & { orgUnitId?: number; status?: string }) =>
    request.get<PageResult<Employee>>('/hr/employees', { params }),

  // 员工详情
  get: (id: number) =>
    request.get<Employee>(`/hr/employees/${id}`),

  // 创建员工
  create: (data: EmployeeCreate) =>
    request.post<number>('/hr/employees', data),

  // 更新员工
  update: (id: number, data: Partial<Employee>) =>
    request.put(`/hr/employees/${id}`, data),

  // 删除员工
  delete: (id: number) =>
    request.delete(`/hr/employees/${id}`),

  // 导出Excel
  export: (params: { orgUnitId?: number; status?: string }) =>
    request.get('/hr/employees/export', {
      params,
      responseType: 'blob',
    }),
};
```

---

## 文件统计

| 类型 | 数量 |
|------|------|
| 页面组件 | 78 |
| 公共组件 | 25+ |
| API服务 | 11 |
| 数据模型 | 10 |
| 自定义Hook | 10+ |
| 工具函数 | 10+ |

---

*本文档描述了前端完整的项目结构设计*
