# 完善 M02 模块短期规划功能实施计划

根据您的要求，我将优先完善 M02 (CoreHR) 模块的短期规划功能，具体包括：**批量导入任职事件 (RQ0012)**、**任职统计报表 (RQ0015)** 以及**补充单元测试**。

## 1. 依赖管理
- 修改 `hr-business-service/pom.xml`，添加 `com.alibaba:easyexcel` 依赖，用于处理 Excel 导入导出。

## 2. 代码实现

### 2.1 批量导入功能 (RQ0012)
- **DTO 定义**: 创建 `EmploymentEventImportDTO`，使用 EasyExcel 注解映射 Excel 列。
- **Controller**: 在 `EmploymentEventController` 中添加：
  - `POST /api/v1/hr/events/import`: 接收 Excel 文件，执行批量导入。
  - `GET /api/v1/hr/events/import/template`: 下载导入模版。
- **Service**: 在 `EmploymentEventService` 中实现 `importEvents` 逻辑：
  - 解析 Excel 文件。
  - 数据校验（必填项、枚举值）。
  - 批量保存为 `DRAFT` (草稿) 状态的任职事件。

### 2.2 任职统计功能 (RQ0015)
- **DTO 定义**: 创建 `EmploymentEventStatisticsDTO`，定义统计响应结构（按类型统计、按状态统计）。
- **Controller**: 在 `EmploymentEventController` 中添加：
  - `GET /api/v1/hr/events/statistics`: 获取任职事件统计数据。
- **Service**: 在 `EmploymentEventService` 中实现 `getStatistics` 逻辑：
  - 聚合查询：统计不同事件类型（晋升、调动等）的数量。
  - 聚合查询：统计不同状态（待审批、已生效等）的数量。

## 3. 质量保障 (测试)
- **单元测试**: 创建 `EmploymentEventServiceTest`，覆盖：
  - 导入逻辑测试（Mock 文件解析）。
  - 统计逻辑测试（Mock 数据库返回）。
  - 现有的状态机流转逻辑测试。

## 执行步骤
1.  添加 Maven 依赖。
2.  创建 DTO 类。
3.  实现 Service 层的导入和统计逻辑。
4.  实现 Controller 层的接口。
5.  编写并运行单元测试。
